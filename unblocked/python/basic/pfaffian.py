import numpy as np

def pfaffian(A):
    n = A.shape[0]
    if n & 1: return 0

    result = 1.0
    for k in range(0, n - 1, 2):
        kp = k + 1 + np.abs(A[k+1:, k]).argmax()

        if kp != k + 1:
            A[[k+1, kp], k:] = A[[kp, k+1], k:]
            A[:, [k+1, kp]] = A[:, [kp, k+1]]

            result *= -1

        if A[k, k+1] == 0.0:
            return 0.0

        result *= A[k, k+1]

        if k+2 < n:
            ak = A[k, k+2:] / A[k, k+1]
            sub = np.outer(ak, A[k+2:, k+1])

            A[k+2:, k+2:] += sub
            A[k+2:, k+2:] -= sub.T
        
    return result

A = np.array([
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
    [-1, 0, 10, 11, 12, 13, 14, 15, 16, 17],
    [-2, -10, 0, 18, 19, 20, 21, 22, 23, 24],
    [-3, -11, -18, 0, 25, 26, 27, 28, 29, 30],
    [-4, -12, -19, -25, 0, 31, 32, 33, 34, 35],
    [-5, -13, -20, -26, -31, 0, 36, 37, 38, 39],
    [-6, -14, -21, -27, -32, -36, 0, 40, 41, 42],
    [-7, -15, -22, -28, -33, -37, -40, 0, 43, 44],
    [-8, -16, -23, -29, -34, -38, -41, -43, 0, 45],
    [-9, -17, -24, -30, -35, -39, -42, -44, -45, 0]
], dtype=np.float64)

print(pfaffian(A))